/*
 * led.c
 *
 *  Created on: Dec 12, 2024
 *      Author: utente
 */

#include "led.h"

// Funzione per inizializzare la configurazione del LED
void led_init (ledConfig* led, uint16_t user_label, GPIO_TypeDef* port, GPIO_PinState init_state){
	led->GPIO_user_label = user_label;  // Imposta l'etichetta del pin GPIO
	led->GPIO_Port = port;  // Imposta la porta GPIO
	led->state = init_state;  // Imposta lo stato iniziale del LED (acceso/spento)
}


void led_init_all(LedArray* leds) {
    led_init(&leds->green_Led, GREEN_LED_Pin, GPIOA, GPIO_PIN_RESET);   // LED verde
    led_init(&leds->yellow_Led, YELLOW_LED_Pin, GPIOB, GPIO_PIN_RESET); // LED giallo
    led_init(&leds->red_Led, RED_LED_Pin, GPIOC, GPIO_PIN_RESET);      // LED rosso
}


// Funzione per accendere il LED
void turnON_led(ledConfig* led){
	if (led->state != GPIO_PIN_SET) {  // Se il LED non è già acceso
        HAL_GPIO_WritePin(led->GPIO_Port, led->GPIO_user_label, GPIO_PIN_SET);  // Accende il LED
        led->state = GPIO_PIN_SET;  // Aggiorna lo stato del LED a "acceso"
    }
}

// Funzione per spegnere il LED
void turnOFF_led(ledConfig* led){
	if (led->state != GPIO_PIN_RESET) {  // Se il LED non è già spento
        HAL_GPIO_WritePin(led->GPIO_Port, led->GPIO_user_label, GPIO_PIN_RESET);  // Spegne il LED
        led->state = GPIO_PIN_RESET;  // Aggiorna lo stato del LED a "spento"
    }
}
